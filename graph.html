<!DOCTYPE html>
<html>
	<head>
		<title>Sample Graph</title>
		<script type="text/javascript">
			function Tag(x) {
				if (x[0] == "#") {
					this.main = document.getElementById(x.slice(1));
				}
				if (x[0] == ".") {
					this.main = document.getElementsByClassName(x.slice(1));
				}

				this.set = function(c) { this.main.innerHTML = c; }
				this.style = function(a, v) { this.main.style[a] = v; }
				this.append = function(c) { this.main.innerHTML += c; }
				this.value = function() { return this.main.value; }
				this.show = function(s) { this.main.style.display = "block"; }
				this.hide = function(s) { this.main.style.display = "none"; }
				this.listen = function(a, f) { this.main.addEventListener(a, f, false); }
			}

			var $ = function(name) { return new Tag(name); }
		</script>
		<script src="js/chart.min.js"></script>
	</head>
	<body>
		<select id="months"></select>
		<select id="days"></select>
		
		<canvas id="myChart" style="width:50vw; height:50vh;"></canvas>
		<script type="text/javascript">
			
		</script>
		<script type="text/javascript">
			var month = 2;
			var year  = 2016;

			function httpGet(url){
				var xmlHttp = new XMLHttpRequest();
				xmlHttp.open("GET", url, false);
				xmlHttp.send(null);
				return xmlHttp.responseText;
			}

			function getUsers(d, m, y){
				return parseInt(httpGet("./date-count.php?month=" + m + "&year=" + y + "&day=" + d));
			}

			var dates = [];

			for (var i = 1; i <= 31; i++) {
				dates.push(i);
			}

			var data = dates.map(function(d) {
				return getUsers(d, month, year);
			});


			var ctx = document.getElementById("myChart");
			var myChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: dates,
					datasets: [{
						label: '# of Students',
						data: data,
						backgroundColor: 'rgba(255, 99, 132, 0.2)',
						borderColor: 'rgba(255,99,132,1)',
						borderWidth: 1
					}]
				},

				options: {
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero:true
							}
						}]
					}
				}
			});
		</script>
	</body>
</html>